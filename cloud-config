#cloud-config
users:
  - name: jerry
    gecos: Jerry Wardlow
    groups: sudo
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    shell: /bin/bash
    lock-passwd: false
    passwd: $6$rounds=666666$lowsodium$1XgqYAxXze69CaPh6FvxU14QGvp4n/NjZ.viwnAPHK1ZB8fHg7eMwkbefcsBZOX8NmvXfmYWhgIS.fujgQhJl/
    ssh-authorized-keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCuEuuSr006K3/+ITdGX0wbgehfY7xzo3OhPyrispqWgeuXTVG3GGGBuvSrv80V/waAB9jkc5hZv+wr0iDnF+F5HMmfAJbJPsXOcAOamFYHVcjAPxmlhrXC8xUKu1GucQ2/1VX7gjzdEvZyv9ReJgAoeVS5PE2E5oM0BDpE29iAX+1MsNFzpB06YnP2x5eHI47ZsD4qTW3SQmqYUPs6gSbTZdyUKsrDNEtPZ6blS3iNHq6kP0xIT/SgtYYIn2FfJXg0+FgFw9Rvy/78TA2j+TG1klBR53OmSg9lWDSplKIg8SNoJwmhkkSM0oSGKb7npTTi/S9xzwjyZRNmFUYZ1471 jerry@EXECUTOR

runcmd:
  - apt-get install -y fail2ban git tree vim
  - curl -o /home/jerry/.bashrc https://raw.githubusercontent.com/jerrywardlow/dotfiles/master/.bashrc
  - curl -o /home/jerry/.aliases  https://raw.githubusercontent.com/jerrywardlow/dotfiles/master/.aliases
  - curl -o /home/jerry/.git-prompt.sh https://raw.githubusercontent.com/jerrywardlow/dotfiles/master/.git-prompt.sh
  - curl -o /home/jerry/.vimrc https://raw.githubusercontent.com/jerrywardlow/dotfiles/master/.vimrc # Pull down .vimrc from Github
  - wget https://raw.githubusercontent.com/gosukiwi/vim-atom-dark/master/colors/atom-dark-256.vim -P /home/jerry/.vim/colors/ # Adds vim color scheme
  - chown -R jerry:jerry /home/jerry/
  - sed -i -e '/^PermitRootLogin/s/^.*$/PermitRootLogin no/' /etc/ssh/sshd_config
  - sed -i -e '/^PasswordAuthentication/s/^.*$/PasswordAuthentication no/' /etc/ssh/sshd_config
  - echo "\nAllowUsers jerry" >> /etc/ssh/sshd_config
  - service ssh restart
